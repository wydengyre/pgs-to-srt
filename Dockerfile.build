FROM denoland/deno:alpine-1.29.4
RUN apk add curl mkvtoolnix

# install just
RUN cd tmp \
    && curl --silent --show-error --fail --location --output just.tar.gz https://github.com/casey/just/releases/download/1.12.0/just-1.12.0-x86_64-unknown-linux-musl.tar.gz \
    && tar xfz just.tar.gz \
    && mv /tmp/just /usr/bin/just

ADD . /pgs-to-srt
CMD cd pgs-to-srt && just ci
